;;; package --- Summary
;;; Commentary:

;;; Code:

;; editor
(setq select-enable-clipboard t)
(setq dired-listing-switches "-aBhl  --group-directories-first")
(setq inhibit-startup-screen t)
(setq linum-format "%d ") ;; Integer followed by space

(tool-bar-mode -1)
(menu-bar-mode -1)
(global-linum-mode t)
(add-to-list 'default-frame-alist '(height . 50))
(add-to-list 'default-frame-alist '(width . 100))
(add-to-list 'default-frame-alist '(font . "DejaVu Sans Mono"))

;; proxy
(setq url-proxy-services
   '(("no_proxy" . "^\\(localhost\\|10\\..*\\|192\\.168\\..*\\)")
     ("http" . "127.0.0.1:1089")
     ("https" . "127.0.0.1:1089")))

;; melpa
(require 'package)
(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)
;; Comment/uncomment this line to enable MELPA Stable if desired.  See `package-archive-priorities`
;; and `package-pinned-packages`. Most users will not need or want to do this.
;;(add-to-list 'package-archives '("melpa-stable" . "https://stable.melpa.org/packages/") t)
(package-initialize)

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(package-selected-packages
   '(yafolding neotree rg ripgrep projectile company magit lsp-ui dumb-jump go-mode multiple-cursors helm lsp-mode flycheck zeno-theme use-package)))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )

(load-theme 'zeno t)

(use-package flycheck
  :ensure t
  :init (global-flycheck-mode))

(use-package lsp-mode
  :ensure t
  :init
  ;; set prefix for lsp-command-keymap (few alternatives - "C-l", "C-c l")
  (setq lsp-keymap-prefix "C-c l")
  (setq lsp-auto-guess-root t)
  :hook (;; replace XXX-mode with concrete major-mode(e. g. python-mode)
         (go-mode . lsp)
         ;; if you want which-key integration
         (lsp-mode . lsp-enable-which-key-integration))
  :commands lsp
;;  :config
;;  (setq lsp-ui-sideline-show-diagnostics t
;;	lsp-ui-sideline-show-hover t
;;	lsp-ui-sideline-show-code-actions t
;;	)
;;  (use-package lsp-ui-sideline))

  :config
  (setq lsp-ui-doc-enable t
        lsp-ui-doc-position 'bottom
        lsp-ui-doc-header t
        lsp-ui-doc-include-signature t
	lsp-ui-doc-delay 1
	lsp-ui-doc-show-with-cursor t)
  (use-package lsp-ui-doc))

(use-package helm
  :ensure t
  :config
  (helm-mode 1)
  :bind (("M-x" . helm-M-x)
         ("C-x b" . helm-mini)
         ("C-x C-f" . helm-find-files)))

(use-package multiple-cursors
  :ensure t
  :bind (("C-c m c" . mc/edit-lines)
         ("C-c m n" . mc/mark-next-like-this)
         ("C-c m p" . mc/mark-previous-like-this)
         ("C-c m a" . mc/mark-all-like-this)))

(use-package projectile
  :ensure t
  :config
  (projectile-mode +1)
  :bind
  (("C-c p" . projectile-command-map)))

(use-package neotree
  :ensure t
  :bind(("C-c n" . neotree-toggle)))

(use-package yafolding
  :ensure t
  :config
  (yafolding-mode 1)
  :bind
  (("C-{" . yafolding-hide-element)
   ("C-}" . yafolding-show-element)))

(provide '.emacs)

(put 'narrow-to-region 'disabled nil)

(add-hook 'go-mode-hook 'lsp-deferred)
(add-hook 'xref-backend-functions #'dumb-jump-xref-activate)
(add-hook 'after-init-hook 'global-company-mode)

;;; .emacs ends here
